<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input {
            margin-bottom: 10px;
        }

        #error-message {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <!-- Form for user input -->
    <form id="userForm">

        <!-- Text input field for username with JavaScript validation -->
        <label for="username">Username (min. 5 characters):</label>
        <input type="text" id="username" name="username" required minlength="5">

        <!-- Email input field with HTML5 and JavaScript regex validation -->
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">

        <!-- Additional input fields with HTML5 validation -->
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required minlength="8">

        <label for="age">Age (between 18 and 99):</label>
        <input type="number" id="age" name="age" required min="18" max="99">

        <label for="terms">Accept Terms and Conditions:</label>
        <input type="checkbox" id="terms" name="terms" required>

        <!-- Display error messages -->
        <div id="error-message"></div>

        <!-- Submit button -->
        <button type="submit">Submit</button>

    </form>

    <script>
        "use strict";

        // JavaScript validation function
        function validateForm(event) {
            // Reset error message on each validation attempt
            document.getElementById('error-message').innerHTML = '';

            // Validate username length
            const usernameInput = document.getElementById('username');
            if (usernameInput.value.length < 5) {
                document.getElementById('error-message').innerHTML = 'Username must be at least 5 characters.';
                event.preventDefault(); // Prevent form submission
                return;
            }

            // Validate email using regex
            const emailInput = document.getElementById('email');
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(emailInput.value)) {
                document.getElementById('error-message').innerHTML = 'Invalid email address.';
                event.preventDefault(); // Prevent form submission
                return;
            }

            // Additional validations can be added here

            // If all validations pass, the form will submit
            alert('Form submitted successfully!');
        }

        // Attach the validation function to the form's submit event
        const userForm = document.getElementById('userForm');
        userForm.addEventListener('submit', validateForm);
    </script>

</body>
</html>
